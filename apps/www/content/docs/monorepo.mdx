---
title: Monorepo
description: Using shadcn/ui components and CLI in a monorepo.
---

Until now, using shadcn/ui in a monorepo was a bit of a pain. You could add
components using the CLI, but you had to manage where the components
were installed and manually fix import paths.

With the new monorepo support in the CLI, we've made it a lot easier to use
shadcn/ui in a monorepo.

The CLI now understands the monorepo structure and will install the components,
dependencies and registry dependencies to the correct paths and handle imports
for you.

## Getting started

<Steps>

### Create a new monorepo project

To create a new monorepo project, run the `init` command. You will be prompted
to select the type of project you are creating.

```bash
npx shadcn@canary init
```

Select the `Next.js (Monorepo)` option.

```bash
? Would you like to start a new project?
    Next.js
❯   Next.js (Monorepo)
```

This will create a new monorepo project with two workspaces: `web` and `ui`,
and [Turborepo](https://turbo.build/repo/docs) as the build system.

Everything is set up for you, so you can start adding components to your project.

Note: The monorepo uses React 19 and Tailwind CSS v4.

### Add components to your project

To add components to your project, run the `add` command **in the path of your app**.

```bash
cd apps/web
```

```bash
npx shadcn@canary add [COMPONENT]
```

The CLI will figure out what type of component you are adding and install the
correct files to the correct path.

For example, if you run `npx shadcn@canary add button`, the CLI will install the button component under `packages/ui` and update the import path for components in `apps/web`.

If you run `npx shadcn@canary add login-01`, the CLI will install the `button`, `label`, `input` and `card` components under `packages/ui` and the `login-form` component under `apps/web/components`.

### Importing components

You can import components from the `@workspace/ui` package as follows:

```tsx
import { Button } from "@workspace/ui/components/button"
```

You can also import hooks and utilities from the `@workspace/ui` package.

```tsx
import { useTheme } from "@workspace/ui/hooks/use-theme"
import { cn } from "@workspace/ui/lib/utils"
```

</Steps>

## File Structure

When you create a new monorepo project, the CLI will create the following file structure:

```txt
apps
└── web         # Your app goes here.
    ├── app
    │   └── page.tsx
    ├── components
    │   └── login-form.tsx
    ├── components.json
    └── package.json
packages
└── ui          # Your components and dependencies are installed here.
    ├── src
    │   ├── components
    │   │   └── button.tsx
    │   ├── hooks
    │   ├── lib
    │   │   └── utils.ts
    │   └── styles
    │       └── globals.css
    ├── components.json
    └── package.json
package.json
turbo.json
```

## Requirements

1. Every workspace must have a `components.json` file. A `package.json` file tells npm how to install the dependencies. A `components.json` file tells the CLI how and where to install components.

2. The `components.json` file must properly define aliases for the workspace. This tells the CLI how to import components, hooks, utilities, etc.

<Tabs defaultValue="v4">

<TabsList>
  <TabsTrigger value="v4">Tailwind CSS v4</TabsTrigger>
  <TabsTrigger value="v3">Tailwind CSS v3</TabsTrigger>
</TabsList>

<TabsContent value="v4">

```json showLineNumbers title="apps/web/components.json"
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "../../packages/ui/src/styles/globals.css",
    "baseColor": "zinc",
    "cssVariables": true
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "hooks": "@/hooks",
    "lib": "@/lib",
    "utils": "@workspace/ui/lib/utils",
    "ui": "@workspace/ui/components"
  }
}
```

```json showLineNumbers title="packages/ui/components.json"
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "",
    "css": "src/styles/globals.css",
    "baseColor": "zinc",
    "cssVariables": true
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@workspace/ui/components",
    "utils": "@workspace/ui/lib/utils",
    "hooks": "@workspace/ui/hooks",
    "lib": "@workspace/ui/lib",
    "ui": "@workspace/ui/components"
  }
}
```

</TabsContent>

<TabsContent value="v3">

```json showLineNumbers title="apps/web/components.json"
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "../../packages/ui/tailwind.config.ts",
    "css": "../../packages/ui/src/styles/globals.css",
    "baseColor": "zinc",
    "cssVariables": true
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@/components",
    "hooks": "@/hooks",
    "lib": "@/lib",
    "utils": "@workspace/ui/lib/utils",
    "ui": "@workspace/ui/components"
  }
}
```

```json showLineNumbers title="packages/ui/components.json"
{
  "$schema": "https://ui.shadcn.com/schema.json",
  "style": "new-york",
  "rsc": true,
  "tsx": true,
  "tailwind": {
    "config": "tailwind.config.ts",
    "css": "src/styles/globals.css",
    "baseColor": "zinc",
    "cssVariables": true
  },
  "iconLibrary": "lucide",
  "aliases": {
    "components": "@workspace/ui/components",
    "utils": "@workspace/ui/lib/utils",
    "hooks": "@workspace/ui/hooks",
    "lib": "@workspace/ui/lib",
    "ui": "@workspace/ui/components"
  }
}
```

</TabsContent>

</Tabs>

3. Ensure you have the same `style`, `iconLibrary` and `baseColor` in both `components.json` files.

4. **For Tailwind CSS v4, leave the `tailwind` config empty in the `components.json` file.**

By following these requirements, the CLI will be able to install ui components, blocks, libs and hooks to the correct paths and handle imports for you.

## Docker Support

This guide walks you through containerizing your shadcn/ui monorepo project with Docker, enabling you to run your application in a consistent and isolated environment.

### Prerequisites

- **Docker:** Ensure [Docker](https://docker.com) is installed on your machine.
- **Next.js Configuration:** Configure your `next.config.mjs` to enable standalone output.

  ```js
  export default {
    output: "standalone",
    // other settings
  }
  ```

This will build the project as a standalone app inside the Docker image.

### Build the Image

To containerize your application, create a Dockerfile in your `apps/web` directory. The following multi-stage Dockerfile optimizes the build process and produces a minimal runtime image:

```dockerfile
# Base image for building stages
FROM node:20-alpine AS base-build
# Install required packages
RUN apk update && apk add --no-cache libc6-compat

# Base image for the runtime environment
FROM node:20-alpine AS base-runner

# Builder stage: Prepare the monorepo
FROM base-build AS builder
WORKDIR /app

# Install Turbo globally for monorepo management
RUN npm install -g turbo

# Copy the entire monorepo
COPY . .

# Prune the monorepo to include only the 'web' workspace
RUN turbo prune --scope=web --docker

# Installer stage: Set up dependencies and build
FROM base-build AS installer
WORKDIR /app

# Copy pruned monorepo structure
COPY --from=builder /app/out/json/ .
COPY --from=builder /app/out/pnpm-lock.yaml ./pnpm-lock.yaml

# Install pnpm via corepack
RUN npm install -g corepack@latest \
  && corepack enable \
  && corepack prepare pnpm@9.12.3 --activate

# Install dependencies with a frozen lockfile
RUN pnpm install --frozen-lockfile

# Copy the full source code
COPY --from=builder /app/out/full/ .

# Create the public directory
RUN mkdir -p /app/apps/web/public

# Build the 'web' application
RUN pnpm dlx turbo run build --filter=web

# Runner stage: Set up the runtime environment
FROM base-runner AS runner
WORKDIR /app

# Create a non-root user for security
RUN addgroup --system --gid 1001 nodejs \
  && adduser --system --uid 1001 nextjs

# Switch to the non-root user
USER nextjs

# Copy essential configuration files
COPY --from=installer /app/apps/web/next.config.mjs .
COPY --from=installer /app/apps/web/package.json .

# Copy the standalone build output
COPY --from=installer --chown=nextjs:nodejs /app/apps/web/.next/standalone ./
# Copy static assets
COPY --from=installer --chown=nextjs:nodejs /app/apps/web/.next/static ./apps/web/.next/static
# Copy public directory
COPY --from=installer --chown=nextjs:nodejs /app/apps/web/public ./apps/web/public

# Expose the application port
EXPOSE 3000

# Start the application
CMD ["node", "apps/web/server.js"]
```

From the root directory of your monorepo, build the Docker image with:

```bash
docker build -t shadcn-ui-web -f apps/web/Dockerfile .
```

This command creates an image tagged `shadcn-ui-web` using the Dockerfile in `apps/web`.

### Run the Container

You can launch the container using either Docker directly or Docker Compose.

#### Using Docker

Run the container and map port 3000 from the container to your host:

```bash
docker run -p 3000:3000 shadcn-ui-web
```

#### Using Docker Compose

Alternatively, use Docker Compose for more configuration options. Create a `docker-compose.yml` file in the root directory:

```yaml
services:
  web:
    build:
      context: .
      dockerfile: ./apps/web/Dockerfile
    ports:
      - "3000:3000"
    environment:
      - NODE_ENV=production
    restart: unless-stopped
    networks:
      - my_network

networks:
  my_network:
    name: my_network
    driver: bridge
```

Then, start the container in detached mode:

```bash
docker compose up --build -d
```

This setup:

- Builds the image from the Dockerfile.
- Maps port 3000 to your host.
- Sets the `NODE_ENV` environment variable to `production`.
- Ensures the container restarts unless manually stopped.
- Connects to a custom bridge network.

Once the container is running, visit [http://localhost:3000](http://localhost:3000) in your browser to access the application.

### Notes

- The Dockerfile leverages a multi-stage build to create a lightweight, secure runtime image. Explore our [example Dockerfile](https://github.com/shadcn-ui/ui/blob/main/templates/monorepo-next/apps/web/Dockerfile) for more details.
- For additional guidance on integrating Turbo Repo with Docker, see the [Turbo Repo documentation](https://turbo.build/repo/docs/guides/tools/docker).
- Customize the Dockerfile or `docker-compose.yml` as needed to fit your project’s requirements.

## Help us improve monorepo support

We're releasing monorepo support in the CLI as **experimental**. Help us improve it by testing it out and sending feedback.

If you have any questions, please reach out to us on [GitHub Discussions](https://github.com/shadcn-ui/ui/discussions).
