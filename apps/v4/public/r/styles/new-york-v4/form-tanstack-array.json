{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "form-tanstack-array",
  "dependencies": [
    "@tanstack/react-form",
    "zod"
  ],
  "registryDependencies": [
    "field",
    "input",
    "input-group",
    "button",
    "card"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/examples/form-tanstack-array.tsx",
      "content": "/* eslint-disable react/no-children-prop */\r\n\"use client\"\r\n\r\nimport * as React from \"react\"\r\nimport { useForm } from \"@tanstack/react-form\"\r\nimport { XIcon } from \"lucide-react\"\r\nimport { toast } from \"sonner\"\r\nimport { z } from \"zod\"\r\n\r\nimport { Button } from \"@/registry/new-york-v4/ui/button\"\r\nimport {\r\n  Card,\r\n  CardContent,\r\n  CardDescription,\r\n  CardFooter,\r\n  CardHeader,\r\n  CardTitle,\r\n} from \"@/registry/new-york-v4/ui/card\"\r\nimport {\r\n  Field,\r\n  FieldContent,\r\n  FieldDescription,\r\n  FieldError,\r\n  FieldGroup,\r\n  FieldLegend,\r\n  FieldSet,\r\n} from \"@/registry/new-york-v4/ui/field\"\r\nimport {\r\n  InputGroup,\r\n  InputGroupAddon,\r\n  InputGroupButton,\r\n  InputGroupInput,\r\n} from \"@/registry/new-york-v4/ui/input-group\"\r\n\r\nconst formSchema = z.object({\r\n  emails: z\r\n    .array(\r\n      z.object({\r\n        address: z.string().email(\"Enter a valid email address.\"),\r\n      })\r\n    )\r\n    .min(1, \"Add at least one email address.\")\r\n    .max(5, \"You can add up to 5 email addresses.\"),\r\n})\r\n\r\nexport default function FormTanstackArray() {\r\n  const form = useForm({\r\n    defaultValues: {\r\n      emails: [{ address: \"\" }],\r\n    },\r\n    validators: {\r\n      onBlur: formSchema,\r\n    },\r\n    onSubmit: async ({ value }) => {\r\n      toast(\"You submitted the following values:\", {\r\n        description: (\r\n          <pre className=\"bg-code text-code-foreground mt-2 w-[320px] overflow-x-auto rounded-md p-4\">\r\n            <code>{JSON.stringify(value, null, 2)}</code>\r\n          </pre>\r\n        ),\r\n        position: \"bottom-right\",\r\n        classNames: {\r\n          content: \"flex flex-col gap-2\",\r\n        },\r\n        style: {\r\n          \"--border-radius\": \"calc(var(--radius)  + 4px)\",\r\n        } as React.CSSProperties,\r\n      })\r\n    },\r\n  })\r\n\r\n  return (\r\n    <Card className=\"w-full sm:max-w-md\">\r\n      <CardHeader className=\"border-b\">\r\n        <CardTitle>Contact Emails</CardTitle>\r\n        <CardDescription>Manage your contact email addresses.</CardDescription>\r\n      </CardHeader>\r\n      <CardContent>\r\n        <form\r\n          id=\"form-tanstack-array\"\r\n          onSubmit={(e) => {\r\n            e.preventDefault()\r\n            form.handleSubmit()\r\n          }}\r\n        >\r\n          <form.Field name=\"emails\" mode=\"array\">\r\n            {(field) => {\r\n              const isInvalid =\r\n                field.state.meta.isTouched && !field.state.meta.isValid\r\n              return (\r\n                <FieldSet className=\"gap-4\">\r\n                  <FieldLegend variant=\"label\">Email Addresses</FieldLegend>\r\n                  <FieldDescription>\r\n                    Add up to 5 email addresses where we can contact you.\r\n                  </FieldDescription>\r\n                  <FieldGroup className=\"gap-4\">\r\n                    {field.state.value.map((_, index) => (\r\n                      <form.Field\r\n                        key={index}\r\n                        name={`emails[${index}].address`}\r\n                        children={(subField) => {\r\n                          const isSubFieldInvalid =\r\n                            subField.state.meta.isTouched &&\r\n                            !subField.state.meta.isValid\r\n                          return (\r\n                            <Field\r\n                              orientation=\"horizontal\"\r\n                              data-invalid={isSubFieldInvalid}\r\n                            >\r\n                              <FieldContent>\r\n                                <InputGroup>\r\n                                  <InputGroupInput\r\n                                    id={`form-tanstack-array-email-${index}`}\r\n                                    name={subField.name}\r\n                                    value={subField.state.value}\r\n                                    onBlur={subField.handleBlur}\r\n                                    onChange={(e) =>\r\n                                      subField.handleChange(e.target.value)\r\n                                    }\r\n                                    aria-invalid={isSubFieldInvalid}\r\n                                    placeholder=\"name@example.com\"\r\n                                    type=\"email\"\r\n                                    autoComplete=\"email\"\r\n                                  />\r\n                                  {field.state.value.length > 1 && (\r\n                                    <InputGroupAddon align=\"inline-end\">\r\n                                      <InputGroupButton\r\n                                        type=\"button\"\r\n                                        variant=\"ghost\"\r\n                                        size=\"icon-xs\"\r\n                                        onClick={() => field.removeValue(index)}\r\n                                        aria-label={`Remove email ${index + 1}`}\r\n                                      >\r\n                                        <XIcon />\r\n                                      </InputGroupButton>\r\n                                    </InputGroupAddon>\r\n                                  )}\r\n                                </InputGroup>\r\n                                {isSubFieldInvalid && (\r\n                                  <FieldError\r\n                                    errors={subField.state.meta.errors}\r\n                                  />\r\n                                )}\r\n                              </FieldContent>\r\n                            </Field>\r\n                          )\r\n                        }}\r\n                      />\r\n                    ))}\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"outline\"\r\n                      size=\"sm\"\r\n                      onClick={() => field.pushValue({ address: \"\" })}\r\n                      disabled={field.state.value.length >= 5}\r\n                    >\r\n                      Add Email Address\r\n                    </Button>\r\n                  </FieldGroup>\r\n                  {isInvalid && <FieldError errors={field.state.meta.errors} />}\r\n                </FieldSet>\r\n              )\r\n            }}\r\n          </form.Field>\r\n        </form>\r\n      </CardContent>\r\n      <CardFooter className=\"border-t\">\r\n        <Field orientation=\"horizontal\">\r\n          <Button type=\"button\" variant=\"outline\" onClick={() => form.reset()}>\r\n            Reset\r\n          </Button>\r\n          <Button type=\"submit\" form=\"form-tanstack-array\">\r\n            Save\r\n          </Button>\r\n        </Field>\r\n      </CardFooter>\r\n    </Card>\r\n  )\r\n}\r\n",
      "type": "registry:example"
    }
  ],
  "type": "registry:example"
}