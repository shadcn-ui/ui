{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "multi-select",
  "type": "registry:ui",
  "registryDependencies": [
    "badge",
    "button",
    "checkbox",
    "command",
    "popover"
  ],
  "files": [
    {
      "path": "registry/new-york-v4/ui/multi-select.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { CheckIcon, ChevronsUpDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Badge } from \"@/registry/new-york-v4/ui/badge\"\nimport { Button } from \"@/registry/new-york-v4/ui/button\"\nimport { Checkbox } from \"@/registry/new-york-v4/ui/checkbox\"\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n  CommandList,\n} from \"@/registry/new-york-v4/ui/command\"\nimport {\n  Popover,\n  PopoverContent,\n  PopoverTrigger,\n} from \"@/registry/new-york-v4/ui/popover\"\n\ntype MultiSelectOption = {\n  label: React.ReactNode\n  value: string\n}\n\ntype MultiSelectContextValue = {\n  value: string[]\n  onValueChange: (value: string[]) => void\n  open: boolean\n  setOpen: (open: boolean) => void\n}\n\nconst MultiSelectContext = React.createContext<MultiSelectContextValue | null>(\n  null\n)\n\nfunction useMultiSelectContext(component: string) {\n  const context = React.useContext(MultiSelectContext)\n\n  if (!context) {\n    throw new Error(\n      `<${component} /> must be used within a <MultiSelect /> component.`\n    )\n  }\n\n  return context\n}\n\ntype MultiSelectProps = {\n  value: string[]\n  onValueChange: (value: string[]) => void\n  children: React.ReactNode\n}\n\nfunction MultiSelect({ value, onValueChange, children }: MultiSelectProps) {\n  const [open, setOpen] = React.useState(false)\n\n  return (\n    <MultiSelectContext.Provider\n      value={{ value, onValueChange, open, setOpen }}\n    >\n      <Popover open={open} onOpenChange={setOpen}>\n        {children}\n      </Popover>\n    </MultiSelectContext.Provider>\n  )\n}\n\nMultiSelect.displayName = \"MultiSelect\"\n\ntype MultiSelectTriggerProps = React.ComponentProps<typeof Button>\n\nfunction MultiSelectTrigger({\n  className,\n  children,\n  ...props\n}: MultiSelectTriggerProps) {\n  const { open } = useMultiSelectContext(\"MultiSelectTrigger\")\n\n  return (\n    <PopoverTrigger asChild>\n      <Button\n        type=\"button\"\n        variant=\"outline\"\n        role=\"combobox\"\n        aria-expanded={open}\n        data-slot=\"multi-select-trigger\"\n        className={cn(\n          \"border-input focus-visible:border-ring focus-visible:ring-ring/50 flex w-fit min-w-[240px] items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm shadow-xs outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        {...props}\n      >\n        <span className=\"flex-1 truncate text-left\">{children}</span>\n        <ChevronsUpDown className=\"text-muted-foreground size-4 shrink-0\" />\n      </Button>\n    </PopoverTrigger>\n  )\n}\n\nMultiSelectTrigger.displayName = \"MultiSelectTrigger\"\n\ntype MultiSelectValueProps = {\n  options: MultiSelectOption[]\n  placeholder?: React.ReactNode\n  maxBadges?: number\n  className?: string\n  children?: React.ReactNode\n}\n\nfunction MultiSelectValue({\n  options,\n  placeholder = \"Select options\",\n  maxBadges = 2,\n  className,\n  children,\n}: MultiSelectValueProps) {\n  const { value } = useMultiSelectContext(\"MultiSelectValue\")\n\n  if (children) return <>{children}</>\n\n  const selectedOptions = options.filter((option) =>\n    value.includes(option.value)\n  )\n\n  if (selectedOptions.length === 0) {\n    return (\n      <span\n        data-slot=\"multi-select-value\"\n        className={cn(\"text-muted-foreground text-sm\", className)}\n      >\n        {placeholder}\n      </span>\n    )\n  }\n\n  const visibleOptions = selectedOptions.slice(0, maxBadges)\n  const hiddenCount = selectedOptions.length - visibleOptions.length\n\n  return (\n    <div\n      data-slot=\"multi-select-value\"\n      className={cn(\"flex flex-wrap items-center gap-1 text-xs\", className)}\n    >\n      {visibleOptions.map((option) => (\n        <Badge key={option.value} variant=\"secondary\">\n          {option.label}\n        </Badge>\n      ))}\n      {hiddenCount > 0 && (\n        <span className=\"text-muted-foreground\">+{hiddenCount} more</span>\n      )}\n    </div>\n  )\n}\n\nMultiSelectValue.displayName = \"MultiSelectValue\"\n\ntype MultiSelectContentProps = React.ComponentProps<typeof PopoverContent> & {\n  searchPlaceholder?: string\n}\n\nfunction MultiSelectContent({\n  className,\n  children,\n  searchPlaceholder = \"Search...\",\n  align = \"start\",\n  ...props\n}: MultiSelectContentProps) {\n  useMultiSelectContext(\"MultiSelectContent\")\n\n  return (\n    <PopoverContent\n      align={align}\n      data-slot=\"multi-select-content\"\n      className={cn(\"w-[var(--radix-popover-trigger-width)] p-0\", className)}\n      {...props}\n    >\n      <Command>\n        <CommandInput placeholder={searchPlaceholder} className=\"h-9\" />\n        <CommandList className=\"max-h-64\">\n          <CommandEmpty>No results found.</CommandEmpty>\n          {children}\n        </CommandList>\n      </Command>\n    </PopoverContent>\n  )\n}\n\nMultiSelectContent.displayName = \"MultiSelectContent\"\n\ntype MultiSelectGroupProps = React.ComponentProps<typeof CommandGroup>\n\nfunction MultiSelectGroup({ className, ...props }: MultiSelectGroupProps) {\n  return (\n    <CommandGroup\n      data-slot=\"multi-select-group\"\n      className={cn(\"p-1\", className)}\n      {...props}\n    />\n  )\n}\n\nMultiSelectGroup.displayName = \"MultiSelectGroup\"\n\ntype MultiSelectLabelProps = React.ComponentProps<\"div\">\n\nfunction MultiSelectLabel({ className, ...props }: MultiSelectLabelProps) {\n  return (\n    <div\n      data-slot=\"multi-select-label\"\n      className={cn(\n        \"text-muted-foreground px-2 py-1 text-xs font-medium\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nMultiSelectLabel.displayName = \"MultiSelectLabel\"\n\ntype MultiSelectItemProps = {\n  value: string\n  label?: React.ReactNode\n  children?: React.ReactNode\n  className?: string\n  disabled?: boolean\n  showCheckbox?: boolean\n}\n\nfunction MultiSelectItem({\n  value,\n  label,\n  children,\n  className,\n  disabled,\n  showCheckbox = true,\n}: MultiSelectItemProps) {\n  const {\n    value: selectedValues,\n    onValueChange,\n    setOpen,\n  } = useMultiSelectContext(\"MultiSelectItem\")\n\n  const isSelected = selectedValues.includes(value)\n\n  function toggle() {\n    const nextValues =\n      value === \"__none__\"\n        ? []\n        : isSelected\n          ? selectedValues.filter((v) => v !== value)\n          : [...selectedValues, value]\n\n    onValueChange(nextValues)\n  }\n\n  const displayLabel = children ?? label ?? value\n\n  return (\n    <CommandItem\n      data-slot=\"multi-select-item\"\n      value={value}\n      disabled={disabled}\n      onSelect={() => {\n        toggle()\n        setOpen(true)\n      }}\n      className={cn(\n        \"flex cursor-pointer items-center justify-between gap-2\",\n        className\n      )}\n    >\n      <div className=\"flex items-center gap-2\">\n        {showCheckbox && (\n          <Checkbox\n            checked={isSelected}\n            onCheckedChange={toggle}\n            className=\"pointer-events-none\"\n          />\n        )}\n        <span className=\"text-sm\">{displayLabel}</span>\n      </div>\n      {isSelected && showCheckbox && (\n        <CheckIcon className=\"text-muted-foreground size-4\" />\n      )}\n    </CommandItem>\n  )\n}\n\nMultiSelectItem.displayName = \"MultiSelectItem\"\n\nexport {\n  MultiSelect,\n  MultiSelectContent,\n  MultiSelectGroup,\n  MultiSelectItem,\n  MultiSelectLabel,\n  MultiSelectTrigger,\n  MultiSelectValue,\n}\n",
      "type": "registry:ui"
    }
  ]
}